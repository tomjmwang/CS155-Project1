(this.webpackJsonpliar=this.webpackJsonpliar||[]).push([[0],{134:function(e,t,a){},152:function(e,t){},154:function(e,t){},165:function(e,t){},167:function(e,t){},194:function(e,t){},196:function(e,t){},197:function(e,t){},202:function(e,t){},204:function(e,t){},223:function(e,t){},235:function(e,t){},238:function(e,t){},244:function(e,t,a){},245:function(e,t,a){"use strict";a.r(t);var n=a(4),r=a.n(n),s=a(127),i=a.n(s),c=(a(134),a(30)),o=a(22),l=a(10),u=a(48),d=a(49),h=a(51),b=a(50),j=a(2),m=function(e){Object(h.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={code:""},n}return Object(d.a)(a,[{key:"handleChange",value:function(e){this.setState({code:e.target.value})}},{key:"render",value:function(){return Object(j.jsx)("div",{className:"root",children:Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)("h1",{children:"\ud83d\udd25\ud83d\udd25\ud83d\udd25 Fire the Liar \ud83e\udd25\ud83e\udd25\ud83e\udd25"}),Object(j.jsxs)("h3",{className:"subheader",children:["A game of getting to know each other (or for some, ",Object(j.jsx)("em",{children:"not"})," getting to know each other)!",Object(j.jsx)("br",{}),Object(j.jsx)("a",{href:"https://docs.google.com/document/d/1tKZH9MmeWXQc_eNcoHw3SsS-xuUpcVUN5S6INx_17vs/edit?usp=sharing",target:"_blank",children:"How to play \u2192"})]}),Object(j.jsx)(o.b,{to:"/enter",children:Object(j.jsx)("button",{className:"block",children:"create new room"})}),Object(j.jsx)("input",{className:"usernameInput",type:"text",value:this.state.code,onChange:this.handleChange.bind(this)}),Object(j.jsx)(o.b,{to:"/enter/"+this.state.code,style:{textDecoration:"none"},children:Object(j.jsx)("button",{className:"block",children:"enter with code"})})]})})}}]),a}(r.a.Component);var v=function(){return Object(j.jsxs)("div",{children:[Object(j.jsx)("h1",{children:"how to play"}),Object(j.jsxs)("p",{style:{width:"75vw",fontSize:"1.5rem",textAlign:"justify",margin:"auto"},children:['one word is randomly chosen, and one player is randomly assigned as the "liar". all players are given the chosen word\'s category, and all but the liar are given the word. the specific rules are up to you and your friends (e.g. # of turns), but a common way to play involves taking turns describing the word: non-liars try to provide enough info to prove their innocence but not enough for the liar to guess the word, while the liar tries to fit in. at the end, everyone votes on who they think the liar is.',Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),"best played over video call! (may implement live chat in the future)"]}),Object(j.jsx)(o.b,{to:"/",style:{textDecoration:"none"},children:Object(j.jsx)("button",{className:"block",style:{marginTop:"30px",marginLeft:"auto",marginRight:"auto"},children:"back"})})]})};var p=function(){return Object(j.jsxs)("div",{children:[Object(j.jsx)("h1",{children:"about / acknowledgements"}),Object(j.jsxs)("p",{style:{width:"75vw",fontSize:"1.5rem",textAlign:"justify",margin:"auto"},children:["i didn't invent this game! i built it after watching"," ",Object(j.jsx)("a",{href:"https://youtu.be/5MS3iaNmKQE?t=401",target:"_blank",rel:"noreferrer",children:"a video of red velvet playing it"}),".",Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),"i also followed a few very helpful tutorials along the way: ",Object(j.jsx)("a",{href:"https://css-tricks.com/intro-firebase-react/",target:"_blank",rel:"noreferrer",children:"this"}),", ",Object(j.jsx)("a",{href:"https://www.developintelligence.com/blog/2017/04/building-a-realtime-chess-game-with-react-and-firebase/",target:"_blank",rel:"noreferrer",children:"this"}),", ",Object(j.jsx)("a",{href:"https://medium.com/@hasangi/writing-deleting-and-updating-data-in-firebase-realtime-database-with-javascript-f26113ec8c93",target:"_blank",rel:"noreferrer",children:"this"}),", and ",Object(j.jsx)("a",{href:"https://css-tricks.com/building-a-real-time-chat-app-with-react-and-firebase/",target:"_blank",rel:"noreferrer",children:"this"}),".",Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),"styling for all buttons done with linus lee's ",Object(j.jsx)("a",{href:"https://thesephist.github.io/blocks.css/",target:"_blank",rel:"noreferrer",children:"blocks.css"}),", game room ids generated with ",Object(j.jsx)("a",{href:"https://www.npmjs.com/package/randomstring",target:"_blank",rel:"noreferrer",children:"node-randomstring"}),".",Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),"built with ",Object(j.jsx)("a",{href:"https://firebase.google.com/docs",target:"_blank",rel:"noreferrer",children:"firebase"})," and ",Object(j.jsx)("a",{href:"https://create-react-app.dev",target:"_blank",rel:"noreferrer",children:"react"}),". usernames are the only player-specific data stored in the database. i did not enable firebase's google analytics for this project."]}),Object(j.jsx)(o.b,{to:"/",style:{textDecoration:"none"},children:Object(j.jsx)("button",{className:"block",style:{marginTop:"30px",marginLeft:"auto",marginRight:"auto"},children:"back"})})]})},g=a(78);g.a.initializeApp({apiKey:"AIzaSyCh8YuaMsuPOca-PX4FZxIq9VvrGY9jvX8",authDomain:"cs247g-9d957.firebaseapp.com",projectId:"cs247g-9d957",storageBucket:"cs247g-9d957.appspot.com",messagingSenderId:"943697705504",appId:"1:943697705504:web:8dac44753753dba7405a45",measurementId:"G-8872W6HKMJ"});var f=g.a,y=a(146);var _=function(){var e=Object(l.f)();return Object(j.jsx)("div",{className:"root",children:Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)("label",{className:"usernameLabel",htmlFor:"username",children:"username:"})," ",Object(j.jsx)("input",{className:"usernameInput",type:"text",id:"username"}),Object(j.jsx)("button",{className:"block",onClick:function(){var t=document.getElementById("username").value;if(t.length>40||0===t.length)document.getElementById("usernameValidationLabel").innerHTML="please enter between 1 and 40 characters";else if(/[^0-9A-Za-z]/.test(t))document.getElementById("usernameValidationLabel").innerHTML="please enter alphanumeric only";else{var a=window.location.pathname,n=f.database().ref("games");if(6===a.length){var r=y.generate(7),s={liar:"",players:[t],stage:0,cards:{true_deck:[""],lie_deck:[""]},current_player:0,current_card:{name:"",val:!0},votes:{true_count:0,lie_count:0},vote_result:"",turn_count:0,end_condition_count:0,round_count:1,info:{true_count:0,lie_count:0}};n.child(r).set(s),e.replace("/room/"+r+"&name="+t)}else{var i=a.substring(7,14),c=document.getElementById("username").value;n.child(i).child("players").push(c),e.replace("/room/"+i+"&name="+t)}}},style:{marginLeft:"auto",marginRight:"auto"},children:"enter"}),Object(j.jsx)("p",{className:"usernameValidationLabel",id:"usernameValidationLabel",children:"(alphanumeric only)"})]})})},x=a(77),O=a.n(x),w=a(129),k=a(28),N=["What is one of your favorite life hacks?","What television show or movie makes you laugh the hardest and why?","Are you a cat person or dog person?","Who do you most admire and why?","Do you think you're courageous or timid? Why?","Which is harder for you to give: time or money? Why?","How old where you when you had your first kiss?","What is the silliest thing you have done in front of an unfamiliar crowd?","What is the class you got the worst grade in?","Have you ever cheated on an exam or quiz? If so, what is the exam on?","What is a secret you kept from your parents?","Are you a morning person or a night person?","How many selfies do you take a day?","are you a coffee person or a tea person?","describe your favorite childhood show","What's the longest time you've ever gone without showering?","type 'what is' in your google search bar. What is the most embarassing thing that pops up?","what is an embarassing nickname that you once had?","Who is your celebrity crush? why?","How much toilet paper do you use for one wipe? (can be in number of perforated 'squares')"];function L(e){for(var t,a,n=e.length;0!==n;)a=Math.floor(Math.random()*n),t=e[n-=1],e[n]=e[a],e[a]=t;return e}var S=function(e){Object(h.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={players:[],current_card:{},stage:0,liar:"",current_player:0,name:window.location.pathname.substring(19),vote_result:"",voted:!1,true_deck:[],lie_deck:[],votes:{true_count:0,lie_count:0},turn_count:0,end_condition_count:0,round_count:1,info:{true_count:0,lie_count:0}},n.startGame=n.startGame.bind(Object(k.a)(n)),n.updateVoteTruth=n.updateVoteTruth.bind(Object(k.a)(n)),n.updateVoteLie=n.updateVoteLie.bind(Object(k.a)(n)),n.restartGame=n.restartGame.bind(Object(k.a)(n)),n}return Object(d.a)(a,[{key:"startGame",value:function(){var e=window.location.pathname.substring(6,13),t=f.database().ref("games").child(e);t.child("cards").child("true_deck").get().then((function(e){var a=e.val(),n=a.shift();t.update({votes:{true_count:0,lie_count:0},current_card:{name:n[0],val:n[1]},stage:1,cards:{true_deck:a,lie_deck:[]},turn_count:0,end_condition_count:0,round_count:1,info:{true_count:8,lie_count:2}})}))}},{key:"updateVoteTruth",value:function(){var e=this,t=window.location.pathname.substring(6,13),a=f.database().ref("games").child(t);a.child("votes").get().then((function(t){var n=t.val();n.true_count=n.true_count+1,a.update({votes:n}),e.setState({voted:!0})}))}},{key:"updateVoteLie",value:function(){var e=this,t=window.location.pathname.substring(6,13),a=f.database().ref("games").child(t);a.child("votes").get().then((function(t){var n=t.val();n.lie_count=n.lie_count+1,a.update({votes:n}),e.setState({voted:!0})}))}},{key:"restartGame",value:function(){var e=window.location.pathname.substring(6,13);f.database().ref("games").child(e).update({stage:0})}},{key:"componentDidMount",value:function(){var e=Object(w.a)(O.a.mark((function e(){var t,a,n=this;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=window.location.pathname.substring(6,13),a=f.database().ref("games").child(t),a.child("players").on("child_added",(function(e){var t=n.state.players;t.push(e.val()),t.sort(),n.setState({players:t})})),a.child("stage").on("value",(function(e){if(n.setState({stage:e.val()}),0===e.val()){for(var t=L(N),r=[],s=0;s<10;s++)s<8?r.push([t[s],!0]):r.push([t[s],!1]);var i={true_deck:r};a.update({cards:i});var c=n.state.players[Math.floor(Math.random()*n.state.players.length)];a.update({liar:c})}})),a.child("cards").on("value",(function(e){n.setState({true_deck:e.child("true_deck").val(),lie_deck:e.child("lie_deck").val()})})),a.child("liar").on("value",(function(e){n.setState({liar:e.val()})})),a.child("current_player").on("value",(function(e){n.setState({current_player:e.val()})})),a.child("current_card").on("value",(function(e){n.setState({current_card:e.val()})})),a.child("vote_result").on("value",(function(e){n.setState({vote_result:e.val()})})),a.child("turn_count").on("value",(function(e){n.setState({turn_count:e.val()})})),a.child("end_condition_count").on("value",(function(e){n.setState({end_condition_count:e.val()})})),a.child("round_count").on("value",(function(e){n.setState({round_count:e.val()})})),a.child("info").on("value",(function(e){n.setState({info:e.val()})})),a.child("votes").on("value",(function(e){e.val().lie_count+e.val().true_count===n.state.players.length-1?a.child("cards").get().then((function(t){var r=t.val().true_deck,s=t.val().lie_deck;null==s&&(s=[]);var i="",c=n.state.end_condition_count,o=n.state.round_count,l=n.state.turn_count+1,u=n.state.info;if(e.val().lie_count>e.val().true_count?(s.push([n.state.current_card.name,n.state.current_card.val]),i="lie deck",c=0):(r.push([n.state.current_card.name,n.state.current_card.val]),i="truth deck",c+=1),4===s.length||6===c){for(var d,h=0,b=0,j=0;j<n.state.true_deck.length;j++)!0===r[j][1]?h+=1:b+=1;d={true_count:h,lie_count:b},a.update({stage:2,cards:{true_deck:r,lie_deck:s},vote_result:i,info:d}),n.setState({voted:!1})}else{var m=n.state.current_player+1;if(m===n.state.players.length&&(m=0),l%n.state.players.length===0){for(var v=0,p=0,g=0;g<r.length;g++)!0===r[g][1]?v+=1:p+=1;u={true_count:v,lie_count:p},o+=1}var f=r.shift();a.update({votes:{true_count:0,lie_count:0},current_player:m,current_card:{name:f[0],val:f[1]},cards:{true_deck:r,lie_deck:s},vote_result:i,end_condition_count:c,round_count:o,turn_count:l,info:u}),n.setState({voted:!1})}})):n.setState({votes:e.val()})}));case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"renderPlayerList",value:function(){var e=this.state.players[this.state.current_player];return Object(j.jsxs)("div",{className:"gameScreenLeft",children:[Object(j.jsx)("p",{className:"playersLabel",children:"players:"}),Object(j.jsx)("div",{className:"playersList",children:this.state.players.map((function(t){return Object(j.jsx)("li",{children:Object(j.jsx)("div",{className:t===e?"currentPlayer":void 0,children:t})},t)}))})]})}},{key:"renderWaitingRoom",value:function(){return Object(j.jsxs)("div",{className:"waiting",children:[Object(j.jsx)("p",{className:"linkLabel",children:"send your friends this code:"}),Object(j.jsx)("p",{className:"link",children:window.location.pathname.substring(6,13)}),Object(j.jsx)("button",{className:"block",onClick:this.startGame,style:{marginTop:"20px",marginLeft:"auto",marginRight:"auto"},children:"start"})]})}},{key:"renderEndPage",value:function(){var e=this.state.info;return Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{className:"liarLabel",children:["Game ends! ",e.true_count," truth cards, ",e.lie_count," lie cards in main deck.",this.state.liar," is the liar!"]}),Object(j.jsx)("button",{className:"block",onClick:this.restartGame,style:{marginTop:"20px",marginLeft:"auto",marginRight:"auto"},children:"play again"})]})}},{key:"renderMainGamePage",value:function(){var e=this.state.players[this.state.current_player],t=this.state.current_card.name,a=(this.state.current_card.val,this.state.name),n=this.state.name===this.state.liar,r=this.state.info,s=this.state.round_count;return Object(j.jsxs)("div",{children:[!n&&Object(j.jsxs)("div",{children:[Object(j.jsx)("u",{children:"You are a truth-teller."}),Object(j.jsx)("br",{}),"You are trying to detect when other people are lying, and figure out who is the liar."]}),n&&Object(j.jsxs)("div",{children:[Object(j.jsx)("u",{children:"You are the liar."}),Object(j.jsx)("br",{}),"You must always lie when it is your turn to answer questions. Try to get dishonest answer integrity cards into the final lie deck without being detected."]}),Object(j.jsx)("div",{children:a!==e?Object(j.jsxs)("p",{className:"promptLabel",children:[e," is answering the question '",t,"'"]}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("p",{className:"promptLabel",children:["It's your turn to answer this question: ",Object(j.jsx)("br",{})," ",t]}),Object(j.jsxs)("p",{className:"promptLabel",children:["You have drawn ",this.state.current_card.val?"an honest":"a dishonest"," answer-integrity card. As a ",n?"Liar":"Truth-teller",", you must ",n?"lie":this.state.current_card.val?"tell the truth":"lie","."]})]})}),a!==e&&Object(j.jsxs)("div",{children:[!1===this.state.voted&&Object(j.jsxs)("div",{className:"votingSection",children:["Do you think ",e," has an honest or dishonest integrity card?",Object(j.jsxs)("div",{className:"votingOptions",children:[Object(j.jsx)("button",{className:"block",onClick:this.updateVoteTruth,children:"Honest"}),Object(j.jsx)("button",{className:"block",onClick:this.updateVoteLie,children:"Dishonest"})]})]}),!0===this.state.voted&&Object(j.jsx)("div",{className:"promptLabel",children:"You have voted!"})]}),a===e&&Object(j.jsx)("div",{className:"votingSection",children:"Other players are currently voting on your ~ honesty ~ \ud83d\ude0c\ud83d\ude0c\ud83d\ude0c"}),Object(j.jsxs)("div",{className:"promptLabel",children:["As of start of round ",s,", there were ",r.true_count," truth cards and ",r.lie_count," lie cards in the main deck."]}),this.state.vote_result&&Object(j.jsxs)("div",{className:"linkLabel",children:["Last question got put in ",this.state.vote_result,"."]})]})}},{key:"render",value:function(){return Object(j.jsxs)("div",{className:"gameScreen",children:[this.renderPlayerList(),Object(j.jsxs)("div",{className:"gameScreenRight",children:[0===this.state.stage&&this.renderWaitingRoom(),1===this.state.stage&&this.renderMainGamePage(),2===this.state.stage&&this.renderEndPage()]})]})}}]),a}(r.a.Component);a(244);var I=function(){return Object(j.jsx)(o.a,{children:Object(j.jsxs)(l.c,{children:[Object(j.jsx)(l.a,{exact:!0,path:"/",render:function(e){return Object(j.jsx)(m,Object(c.a)({},e))}}),Object(j.jsx)(l.a,{exact:!0,path:"/instructions",render:function(e){return Object(j.jsx)(v,Object(c.a)({},e))}}),Object(j.jsx)(l.a,{exact:!0,path:"/acknowledgements",render:function(e){return Object(j.jsx)(p,Object(c.a)({},e))}}),Object(j.jsx)(l.a,{exact:!0,path:"/enter",render:function(e){return Object(j.jsx)(_,Object(c.a)({},e))}}),Object(j.jsx)(l.a,{exact:!0,path:"/enter/:id",render:function(e){return Object(j.jsx)(_,Object(c.a)({},e))}}),Object(j.jsx)(l.a,{exact:!0,path:"/room/:id",render:function(e){return Object(j.jsx)(S,Object(c.a)({},e))}})]})})},W=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,246)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,i=t.getTTFB;a(e),n(e),r(e),s(e),i(e)}))};i.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(I,{})}),document.getElementById("root")),W()}},[[245,1,2]]]);
//# sourceMappingURL=main.3d45373f.chunk.js.map